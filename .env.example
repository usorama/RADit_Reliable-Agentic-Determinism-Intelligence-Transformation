# ===========================================
# DAW - Deterministic Agentic Workbench
# Environment Configuration Template
# ===========================================
# Copy this file to .env and fill in actual values

# ============================================
# Infrastructure Services
# ============================================

# Neo4j Configuration (Hostinger VPS)
# Actual credentials in .creds/neo4j_vps.txt
NEO4J_URI=bolt://72.60.204.156:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=daw_graph_2024

# Redis Configuration (Celery + LangGraph Checkpoints)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================
# Authentication (Clerk)
# ============================================
CLERK_PUBLISHABLE_KEY=pk_test_your_key_here
CLERK_SECRET_KEY=sk_test_your_key_here
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your_key_here

# Clerk URLs (adjust for your deployment)
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/

# ============================================
# LLM Providers
# ============================================

# OpenAI
OPENAI_API_KEY=sk-your_openai_key_here

# Anthropic
ANTHROPIC_API_KEY=sk-ant-your_anthropic_key_here

# ============================================
# Observability (Helicone)
# ============================================
HELICONE_API_KEY=sk-helicone-your_key_here
HELICONE_BASE_URL=https://oai.helicone.ai/v1

# ============================================
# Sandbox Execution (E2B)
# ============================================
E2B_API_KEY=your_e2b_api_key_here

# ============================================
# Application Configuration
# ============================================

# Backend API
API_BASE_URL=http://localhost:8000
NEXT_PUBLIC_API_BASE_URL=http://localhost:8000

# Frontend
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Environment
NODE_ENV=development
PYTHON_ENV=development

# ============================================
# MCP Server Configuration
# ============================================
MCP_GIT_SERVER_URL=http://localhost:3100
MCP_FILESYSTEM_SERVER_URL=http://localhost:3101
MCP_POSTGRES_SERVER_URL=http://localhost:3102

# ============================================
# Celery Configuration
# ============================================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# ============================================
# LangGraph Configuration
# ============================================
LANGGRAPH_CHECKPOINT_BACKEND=redis://localhost:6379/1

# ============================================
# Security
# ============================================

# JWT Secret (generate with: openssl rand -base64 32)
JWT_SECRET=your_jwt_secret_here_change_me

# OAuth 2.1 Token TTL (in seconds)
MCP_TOKEN_TTL_AUTOMATED=900    # 15 minutes for automated sessions
MCP_TOKEN_TTL_INTERACTIVE=3600 # 1 hour for interactive sessions

# ============================================
# Monitoring & Logging
# ============================================
LOG_LEVEL=INFO
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years for SOC 2/ISO 27001 compliance

# ============================================
# Cost & Budget Controls
# ============================================
MAX_COST_PER_TASK=0.50        # USD
DAILY_BUDGET_LIMIT=100.00     # USD
MONTHLY_BUDGET_LIMIT=3000.00  # USD

# ============================================
# Model Router Configuration
# ============================================
# Model selection strategy: auto|manual
MODEL_ROUTER_STRATEGY=auto

# Default models by task type (used when strategy=auto)
MODEL_PLANNING=o1-preview       # High reasoning for planning
MODEL_CODING=claude-sonnet-4    # Balanced for coding
MODEL_VALIDATION=gpt-4o         # Different from executor
MODEL_FAST=claude-haiku-3       # Speed-optimized

# ============================================
# Drift Detection Thresholds
# ============================================
DRIFT_TOOL_USAGE_THRESHOLD=0.5      # 50% deviation triggers warning
DRIFT_REASONING_STEPS_THRESHOLD=1.0  # 100% increase triggers pause
DRIFT_CONTEXT_WINDOW_THRESHOLD=0.9   # 90% utilization forces compaction
DRIFT_RETRY_RATE_THRESHOLD=3.0       # 3x baseline escalates to human
DRIFT_COST_THRESHOLD=2.0             # 200% increase triggers budget alert

# ============================================
# Evaluation Thresholds (Release Blocking)
# ============================================
EVAL_PASS_AT_1_THRESHOLD=0.85        # 85% first attempt success (blocking)
EVAL_TASK_COMPLETION_THRESHOLD=0.90  # 90% task completion (blocking)
EVAL_PASS_8_THRESHOLD=0.60           # 60% 8-trial consistency (warning)
EVAL_SIMILARITY_THRESHOLD=0.85       # 85% similarity to golden refs (blocking)

# ============================================
# Quality Gates (Deployment)
# ============================================
GATE_COVERAGE_NEW_CODE_MIN=0.80      # 80% coverage for new code (blocking)
GATE_COVERAGE_TOTAL_MIN=0.70         # 70% total coverage (blocking)
GATE_API_P95_MAX_MS=500              # API p95 < 500ms (warning)
GATE_BUNDLE_SIZE_INCREASE_MAX=0.10   # Bundle size increase < 10% (warning)
GATE_VISUAL_REGRESSION_THRESHOLD=0.001  # Visual regression < 0.1% (blocking)
